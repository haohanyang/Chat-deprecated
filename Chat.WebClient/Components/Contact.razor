@using Chat.Common.DTOs;


<li style="cursor:pointer" class="p-2 border-bottom" @onclick="OnClick">
    <a class="d-flex justify-content-between text-decoration-none">
        <div class="d-flex flex-row">
            <div>
                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp" alt="avatar"
                    class="d-flex align-self-center me-3" width="60">
            </div>
            <div class="pt-1">
                <p class="fw-bold mb-0">@User.FirstName @User.LastName</p>
                <p class="small text-muted"> @LastMessage?.Content</p>
            </div>
        </div>
        <div class="pt-1">
            <p class="small text-muted mb-1">
                @LastMessage?.Time
            </p>
            @if (UnreadMessageCounts > 0)
            {
                <span class="badge bg-danger rounded-pill float-end">@UnreadMessageCounts</span>
            }
        </div>
    </a>
</li>


@code {
    [Parameter]
    public UserDTO User { get; set; } = new();

    [Parameter]
    public MessageDTO? LastMessage { get; set; }

    [Parameter]
    public int UnreadMessageCounts { get; set; } = 0;

    [Parameter]
    public EventCallback<UserDTO> OnClickCallback { get; set; }


    private void OnClick()
    {
        OnClickCallback.InvokeAsync(User);
    }
}